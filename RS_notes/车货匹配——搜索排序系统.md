# 车货匹配——搜索排序系统

## 核心场景

在每一段时间窗口结束位置，更新所有货源与司机状态，返回当前时间窗口内的这一批司机所匹配的货物列表。

- **输入**：
  - 当前时间结点下的库存数据（S）
  - 当前时间窗口内的司机信息（T）
- **输出**：
  - 当前时间窗口内的司机对应的货物列表（P)

- **切分时间窗口**：司机在app上点击报道表示准备装货（司机十公里内报道），统计并分析司机报道的时间发现司机报道集中在某一时间段内（主要是上午8点至10点），下午报道司机数量较少，将一天的时间切分为不同粒度的时间窗口。
- **司机特征**：
  - 常运品种
  - 常运路线
  - 常装卸仓库（少装/多装）
  - 司机住址（通过身份证获取）
  - 常装货时间（早中晚）
  - 最近一次装货时间
  - 常装卸时间差（运货频率）
- **货物特征**：
  - 品种
  - 城市
  - 优先级
  - 装卸仓库
  - 发布信息
  - 车辆信息
- **目标**：
  - 发运货物总重量最大化
  - 优先发运优先级高的货物

1. 离线计算
   - 更新当前平台所有司机的个人信息、历史运载记录
   - 
2. 在线平台
   - 根据司机信息和业务规则，对货物进行筛选过滤；
   - 建立匹配模型 $f(s,t)$，其中 $S$ 表示货物集合， $s\in S$ 表示某一具体货物，$T$ 表示司机集合 $t\in T$ 表示某一特定司机；
   - 时间窗口结束时，输入当前筛选的货物和司机
   - 召回当前可用货源对其过滤、排序、然后再召回对应规则（城市、品种）的司机，对司机进行过滤、排序。最终将货源推送给司机。

根据货物特征和司机特征，生成对应的货物特征向量和司机特征向量，对其进行匹配度分析及排序，最终根据排序结果将货物与司机进行匹配。

匹配度计算：根据司机特征，排除不匹配的货物；通过相似度方程计算剩余货物与司机的匹配度，根据每一司机，根据货物匹配度进行排序，生成最终的排序结果。

